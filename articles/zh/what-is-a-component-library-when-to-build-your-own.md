---
title: 什么是组件库？何时构建自己的组件库，何时使用他人的组件库
date: 2024-08-19T09:58:26.377Z
author: Andrico Karoulla
authorURL: https://www.freecodecamp.org/news/author/andrico1234/
originalURL: https://www.freecodecamp.org/news/what-is-a-component-library-when-to-build-your-own/
posteditor: ""
proofreader: ""
---

在过去五年中，如果你构建过前端项目，那么你可能已经编写过一些组件，甚至使用过组件库。

<!-- more -->

组件和库多年来一直是Web开发领域的重要组成部分，它们依然像以往一样有用和重要。

现在，有些时候你应该构建自己的组件库，而有些时候最好使用第三方选项。本文将让你了解每种方法的优缺点，并使你能够为下一个项目做出正确的决定。

### 目录：

-   [一个类比：如果没有预先录制的音乐专辑会怎样？][1]
   
-   [我为什么写这篇指南][2]
   
-   [什么是组件？][3]
   
-   [什么是组件库？][4]
   
-   [组件库和设计系统有什么区别][5]
   
    -   [设计系统][6]
       
    -   [组件库][7]
       
-   [组件库的简史][8]
   
-   [什么是好的组件库？][9]
   
-   [使用组件库的好处是什么？][10]
   
-   [使用第三方组件库的缺点是什么？][11]
   
-   [组件库的不同形态][12]
   
    -   [实用类库 / CSS 样式指南][13]
       
    -   [现成的组件库][14]
       
    -   [无样式组件][15]
       
    -   [可复制粘贴的组件库][16]
       
-   [为什么没有一个统治一切的组件库？][17]
   
-   [你应该构建自己的组件库吗？][18]
   
-   [何时（以及为什么）构建自己的组件库有用][19]
   

## 一个类比：如果没有预先录制的音乐专辑会怎样？

我是一个巨大的音乐爱好者。我最喜欢的消遣之一是播放一张唱片并从头到尾聆听。音乐专辑的概念很简单：它是艺术家的录制曲目的合集，被认为是一套完整一致的歌曲。

但如果没有录制的音乐呢？你只能在艺术家为你现场演奏时听专辑，而不是将歌曲录制到磁带、CD或mp3（如果你喜欢那种方式，可以是FLAC）。你需要去找乐队，请他们设置设备，然后让他们从头到尾演奏专辑。他们每次都必须以相同的方式演奏，以确保每个人都有完全相同的体验。

这种方式有很多缺点。它不是确保任何对乐队音乐感兴趣的人都能听到音乐的有效方式。如果泰勒·斯威夫特亲自为每个在Spotify上听她的《Fortnight》的人演奏这首歌，她需要3179年。这还不包括任何[飞机旅行][20]。艺术家们会感到厌倦，甚至可能会变得粗心大意，从而导致听众的体验变差。

这与Web开发有什么关系呢？每次你构建一个UI控件时，你都必须确保它是功能性的、健壮的和可访问的。如果你每次都重复编写相同的UI，你会感到厌倦。错误会悄然而至，从而导致最终用户的体验变差。

## 我为什么写这篇指南

我做了近十年的Web开发，编写了数百个组件，通常是多次使用相同的UI模式。我使用了数十个组件库，并构建了管理仪表盘、组件库、移动应用程序、博客、Figma插件、VSCode扩展等等。

在本文中，我将讨论组件和库在Web开发中的作用，以及开发人员是否应该编写自己的组件。

我也是[Component Odyssey][21]课程的创建者，该课程将教你如何构建在任何前端框架中工作的组件库。

## 什么是组件？

构建用户界面时，我们不会每次都从头编写所有HTML标记。我们使用组件编写UI——这些是封装了常见UI模式的可重用构建块。编写组件可以让你在单个项目中甚至独立项目中多次使用。

这里我写了一个计数器组件。我只写了一次，并在页面的多个地方使用。

```
<body>
  <div class="wrapper">
    <counter-button></counter-button>
    <counter-button></counter-button>
    <counter-button></counter-button>
  </div>

  <script type="module">
    import { LitElement, html } from 'lit';

    class CounterButton extends LitElement {
      constructor() {
        super();
        this.count = 0;
      }

      static properties = {
        count: { type: Number }
      };

      _increment() {
        this.count++;
      }

      render() {
        return html`
          <button @click=${this._increment}>Count: ${this.count}</button>
        `;
      }
    }

    customElements.define('counter-button', CounterButton);
  </script>
</body>
```

我们这些教程创建者喜欢展示计数器，就像它们要过时了一样——但现实世界的应用程序会包含几十种不同的UI模式，这些模式都是写成组件的。

在本文中，我将把提供某些UI模式样式的CSS规则归入组件的范畴。根据你问的人的不同，这个定义可能会变得模糊。

## 什么是组件库？

并非所有组件都是独立的。将许多组件组合在一个包中是有意义的，这就叫做组件库。

如果你希望你的网站有特定的外观或感觉，可以使用_组件库_。有一些组件库：

-   提供遵循设计规范的组件。
   
-   为特定的UI模式提供多种解决方案。
   
-   与特定的工具链配合使用。
   

但它们有不同的形态和大小。定义组件库时，我采用的定义如下：

_组件库是一组在功能或外观（或两者）上统一的可重用组件。一个优秀的组件库将帮助开发人员高效地实现他们的UI需求，同时为最终用户提供卓越的体验。_

## 组件库和设计系统有什么区别？

我稍后会在文章中谈及指南和设计系统，因此先花点时间澄清一下它们。很难看出二者的界限在哪里，一个开始，另一个结束，或者一个涵盖另一个。

### **设计系统**

我将设计系统视为关于外观、感觉和行为的规范。设计系统可以涵盖产品、品牌或公司，以确保在不同体验中的一致性。一个全面的设计系统将规定从字体家族、字体大小、间距大小到UI模式和文案指南的所有内容。

一些最为人知的设计系统包括：

-   [Material Design][22]（谷歌）
   
-   [Base Design][23]（优步）
   
-   [Lightning Design System][24]（Salesforce）
   

虽然许多设计系统是公司特有的，但也有一些设计系统，如Material Design，全球团队可以使用它们来快速构建具有熟悉感觉的产品。你可能已经使用了多种遵循Material Design原则的产品，但它们[当然也不是没有基本的可用性问题][25]。

### **组件库**

至于组件库，它们可能是也可能不是设计系统的代码实现。如果你所在的公司有设计系统，相应的组件库（如果存在的话）往往会与其紧密集成。

例如，谷歌的[Material Web][26]是Material Design的Web组件实现。[Base Web][27]和[Lightning Web Components][28]也是开源的。

## 组件库的简史

UI组件（或小部件）的概念已经存在很长时间了。如果你想看到一个博物馆般的复古用户界面，请抓些爆米花，观看这部[1974-1990年的“所有小部件”2小时视频][29]。

从2000年初开始，我们就看到了帮助开发者构建Web的组件库。

当时的Web浏览器景观与现在大不相同。Internet Explorer版本完全脱离了规范，这在当时Internet Explorer具有[巨大的市场份额][30]时尤为严重。[Internet Explorer 6以开发难度著称][31]。主要原因是它对[框模型][32]的错误实现，以及缺乏对CSS2的支持。

> 💡 高亮，Internet Explorer支持一种“[怪异模式][33]”，允许开发者编写非标准的HTML和CSS，以迎合不支持标准的旧浏览器。

幸运的是，当我认真从事Web开发时，许多这些问题已经被解决了。到了这个时候，仍然有一些库让编写具有跨浏览器支持的复杂界面变得更容易。

[jQuery UI][34]，是我使用的第一个组件库，它支持手风琴和其他小部件。但浏览器不断进化，现在我们有了一种使用`details`和`summary`元素实现这种手风琴模式的方法，2020年所有浏览器都支持这些元素。

使用这些元素，你可以在没有JavaScript的情况下创建交互式手风琴。

与2009年形成对比，当时这些元素尚未在任何浏览器中实现。这需要一定的JS才能正常工作。请看[jQuery UI v1.7源代码][35]，按CTRL+F搜索“accordion”，如果你想看到15年前Web开发者是如何实现手风琴的。

在接下来的几十年里，Web的能力不断增长。更强大的设备意味着更强大的浏览器。更强大的浏览器意味着Web应用变得更有野心。

开发者通过创建工具来响应这些需求，帮助我们通过_构建块_（即组件模型）创建用户界面。我们看到了这些基于组件的框架的繁荣。我指的是Angular、React和Vue。每个都有其丰富的组件库生态系统。

可以合理地说，前端景观已经被过度矫正，现在充满了过于强大的工具，对于大多数人的需求来说……但我们不讨论这个问题。

## 什么是好的组件库？

构建一个组件库的挑战在于，它们不是_一次性完成_的交易。许多最受欢迎的库已经存在多年，并进行了大量的研究、使用反馈和贡献，才达到现在的地步。

我发现，一个好的组件库通常具有以下特征：

-   它理解其目标开发者的问题，并很好地解决这些问题。
   
-   它有很好的文档。
   
-   它确保用户有良好的体验。
   
-   它健壮，适用于适当的输入模式和设备。
   

反之，如果组件库_不好_，可以辨识出它不考虑无障碍性，API不一致，项目管理不明确或不一致，以及文档缺乏清晰性和一致性。

## 使用组件库的好处是什么？

我们已经了解了好的组件库是什么样的——现在让我们看看它是如何让你和用户的生活变得更美好的。

### 组件库为你节省时间

如果你的项目时间紧迫，则必须提高效率。但高效不应以牺牲打造健全的Web体验为代价。使用组件库可以让你花更少的时间重新发明轮子，从而更多地关注细节。

### 组件库让你和你的用户更快乐

我们不被重复工作所激励。我们喜欢技术挑战，反复编写相同的组件不是一个有趣的挑战。我们已经谈到了当我们厌倦时会发生什么，错误会悄然而至。

如果你想从头实现一个对话框组件，你需要：

-   正确处理焦点捕获。
   
-   使页面的其余部分变得无效。
   
-   正确定位对话框。
   
-   确保它能与辅助技术一起工作。
   

要记住和实现上述内容需要付出努力，但出错的后果可能会使你的界面完全无法使用。例如，如果你[错误地处理焦点][36]。

通过使用以终端用户为中心构建的组件库，你可以防止引入破碎体验的风险，同时花更少的时间重建相同的组件。

### 组件库带来一致的体验

如果你在一家拥有多个不同Web应用的公司工作，它们通常会遵循一套指南。这些指南可能规定了应该使用的颜色调色板、排版大小或UI元素的外观和行为。

但如果你重新编写组件，你的应用偏离样式指南的可能性就会增加。通过拥有一个组件库，你可以更容易地审计你的组件UI是否符合品牌指南，这样它们无论在哪里使用，都看起来很棒。

优步有几款共享相同用户界面的应用程序。我几乎可以肯定他们在这些应用程序中使用了相同的组件库。这样，每个新应用程序几乎都能保证遵守品牌指南。

![不同优步应用程序并排展示，显示它们在外观上的相似性](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4lh0etdq7yhk4zhmiac8.png)

## 使用第三方组件库的缺点是什么？

上述好处无论你使用自己的组件库还是第三方组件库都适用。如果你或你的团队决定不构建库，而是依赖第三方，那么值得考虑以下几点。

### 供应商锁定

通过选择组件库，你在选择一个影响很大的合作伙伴，它将极大地影响你编写前端代码的方式以及你的界面的外观和行为。

前者将对你产生重大影响，而后者将对终端用户产生重大影响。使用组件库即是将你锁定在该组件库的标准中。

该库可能会在一个主要版本中引入重大变更，从而需要专门的开发时间以及大量测试，以确保没有引入严重倒退。

几年前，我使用React Admin构建了一个复杂的管理仪表盘。该库提供了一套专门用于获取和显示复杂数据的组件。

因为我们的应用程序当时严重依赖React Admin，在主要版本之间升级时十分具有挑战性，特别是因为React Admin使用的许多内部工具都被更换了。变化范围很大，我们花了很多时间升级并标记我们发现的问题。

我不认为构建我们自己的解决方案在长期内会为我们节省任何时间，但这种供应商锁定是值得考虑的，特别是在完全依赖某个工具之前。

### 代码膨胀

令人震惊的是，拥有许多组件的库往往会编写大量代码。你在安装依赖项时下载的代码，以及发送给终端用户的代码。

现代工具使得执行树摇动等包优化更容易，以删除未使用的代码，但不能保证你删除的所有代码都是终端用户不需要的。

除非深入了解你使用的库，否则你可能不知道它们正在导入的所有独立包。你可能最终拥有成百上千个不必要的依赖项。[e18e][37]社区的成员一直在努力专注解决这个问题，[同时也在修复这个问题][38]。

许多这些问题也可能适用于推出你自己的组件库。最大的区别在于你拥有你组件库的管理权。你能够定义它如何解决你的特定问题，并且你可以控制改进它的缺点。

## 组件库的不同形态

为万维网提出的[最初提案][39]是为了改善欧洲核子研究组织（CERN）研究人员之间的交流。提案概述了如何通过超文本共享和链接文档。

这是Web的基本基石，我们仍然使用简单的`<a>`标签在整个Web上链接其他HTML文档。

但在过去几十年中，Web的范围已经扩大，而我们用来浏览Web的浏览器也成了庞然大物。今天的浏览器可以实现[强大的创意表达形式][40]，[运行类原生软件][41]。

这里有数百种不同的解决方案，一些是通用的，另一些则是超细分的，但为你的下一个项目找到合适的工具需要一个复杂的决策过程，可能如下所示：

![组件库的不同种类，以及什么时候应该使用它们。图表的上下文在下文中探讨](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/bn80olo3e0h8v4h4v311.png)

这不是一个包括所有用例或组件库类型的全部列表，但它说明了组件库在以下方面的不同：

-   涉及的技术。
   
-   它们提供的抽象级别。
   
-   它们解决的问题。
   

让我们看看一些最常见的组件库类型。

💡 快速提示：如果你有兴趣构建自己的Web组件库，那么可以考虑查看我的课程[Component Odyssey][42]。你将学习如何构建和发布在任何前端框架中工作的组件库。

### 实用类库 / CSS 样式指南

对我来说，[Bootstrap][43]是第一个浮现在脑海中的。以前，如果你想快速美化你的网站，你会添加指向Bootstrap CSS文件的CDN链接，并立即获得那种Bootstrap外观。它在2010年代中期无处不在。

![2013年左右的Bootstrap网站的演示示例](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7zl86ek2nhsoxc043pnt.png)

这些工具的技术范围从

-   单一CSS文件（[Pico][44]）

到

-   基于你的配置生成CSS类的工具链（[Tailwind][45]）

还有许多其他工具，如[Open Props][46]，它们介于两者之间。

### 现成的组件库

如果你在构建一个交互式Web应用程序，你可能只想获取一套看起来很棒且功能强大的组件

